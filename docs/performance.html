<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Klojang Check</title>
    <link rel="stylesheet" href="bootstrap5/css/bootstrap.min.css">
    <link rel="stylesheet" href="bootstrap5/css/bootstrap-grid.min.css">
    <link rel="stylesheet" href="klojang-docs.css">
</head>
<body>
<div class="container">
    <div class="row mb-3 min-vh-100">
        <div class="col-md-2 side-bar">
            <div class="menu">
                <div class="menu-item"><a href="index.html">Introduction</a></div>
                <div class="menu-item"><a href="performance.html">Performance</a></div>
                <div class="menu-item"><a href="basic-usage.html">Basic Usage</a></div>
                <div class="menu-item"><a href="tagging-values.html">Tagging Values</a></div>
                <div class="menu-item"><a href="common-checks.html">Common Checks</a></div>
                <div class="menu-item"><a href="chaining-checks.html">Chaining Checks</a></div>
                <div class="menu-item"><a href="predicates-and-relations.html">Predicates &amp; Relations</a></div>
                <div class="menu-item"><a href="error-handling.html">Error Handling</a></div>
                <div class="menu-item"><a href="custom-messages.html">Custom Messages</a></div>
                <div class="menu-item"><a href="property-validation.html">Property Validation</a></div>
            </div>
        </div>
        <div class="col-md-9 main-column">
            <h1>KLOJANG CHECK</h1>
            <h2>Performance</h2>
            <p>
                As you can tell from the code example in the <a href="index.html">Introduction</a>,
                Klojang Check exposes a fluent API that allows you to execute multiple checks on the
                same value. That implies that there must be some object creation going on. Nevertheless,
                benchmarking Klojang Check using <a href="https://github.com/openjdk/jmh">JMH</a>
                yields no difference with hand-coded checks. You can view the results of the benchmarks
                <a href="https://github.com/klojang4j/klojang-check-jmh">here</a>.
            </p>
            <p>
                Looking at the code example, that should not be surprising. The object creation is
                completely localized and, in fact, redundant &#8211; the object created by 
                <span class="inline-code">Check.that(...)</span> never gets assigned. Consequently,
                the JVM clearly has no trouble compiling it away altogether.
            </p>
            <p class="info-box">
                <b>We Don't Check Your Check</b><br><br>
                Perhaps paradoxically, while Klojang Check is all about ensuring your method's preconditions
                are met before doing anything else, Klojang Check itself does no such thing. Take, for
                instance, this statement:<br><br>

                <span class="inline-code" style="font-size: 100%;">Check.that(fullName).is(hasSubstring(), lastName);</span><br><br>

                The <span class="inline-code">hasSubstring()</span> check simply wraps 
                <span class="inline-code">String::contains</span>, so this statement will fly 
                off the rails with a <span class="inline-code">NullPointerException</span> if any of the 
                provided arguments is null. Yet, Klojang Check will not perform a null check on any
                of them. That sounds like a bad case of "Do As I Say, Not As I Do", but we think
                it is justified. In the (pretty) odd case that the check to be executed is not known beforehand,
                and is dynamically inserted into the <span class="inline-code">is(...)</span> method, the
                check itself becomes program input and, hence, needs to be tested just like anything else
                entering your program. As for the <span class="inline-code">fullName</span> argument,
                which is the value we are testing: if it can possibly be null, you should always first
                perform a null check:<br><br>
                <span class="inline-code" style="font-size: 100%;">Check.notNull(fullName).is(hasSubstring(), lastName);</span><br><br>

                Klojang Check provides a syntactical mould for you to stick your tests into, but in the
                end it is still you who decides which tests to execute and in which order. If each and
                every check would automatically be supplemented with three or four more checks, just to
                verify that the original check was specified correctly, that would raise the cost of
                doing a check to a level that is most likely unacceptable for many developers.
                If you feel you should check the value of some variable in a tight loop, Klojang Check should
                not be the reason <i>not</i> to do it.
            </p>
        </div>
    </div>
</div>
</body>
</html>